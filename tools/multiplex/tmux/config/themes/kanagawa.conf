# Kanagawa Wave Tmux Theme
# Based on the original structure and visual elements.
# https://github.com/rebelot/kanagawa.nvim

# ----------------------------=== Colors ===--------------------------
# Kanagawa Wave Palette (approximated for common Tmux use)
thm_bg="#1F1F28"         # sumiInk0 - Darkest background, main statusline bg
thm_fg="#C8C093"         # fg - Main foreground text
thm_cyan="#6A979A"       # waveAqua - for messages, subtle highlights
thm_black="#0D0C13"      # sumiInk0 (slightly darker if needed for extreme contrast)
thm_gray="#363646"       # sumiInk2 - Secondary background, subtle borders
thm_magenta="#C0A36E"    # waveFlower - Accent for elements
thm_pink="#D27E99"       # waveRed (muted) - Accent for tunes display/modes
thm_red="#E46A6A"        # waveRed
thm_green="#76946A"      # waveGreen
thm_yellow="#DCA561"     # waveYellow
thm_blue="#7E9CD8"       # waveBlue
thm_orange="#FFA066"     # waveOrange
thm_dark="#54546D"       # sumiInk3 - Darker grey for borders/modes bg

# ----------------------------=== Theme ===--------------------------
set -g status-position top
set -g status "on"
set -g status-bg "${thm_bg}"
set -g status-justify "left"
set -g status-left-length "100"
set -g status-right-length "100"

# messages
set -g message-style fg="${thm_cyan}",bg="${thm_gray}",align="centre"
set -g message-command-style fg="${thm_cyan}",bg="${thm_gray}",align="centre"

# borders
set-window-option -g pane-active-border-style fg=$thm_green # Active pane border in green
set-window-option -g pane-border-style fg=$thm_dark         # Inactive pane border in dark grey

# tunes widget (assuming $DOTFILES is correctly set in your shell environment)
tm_tunes="#(osascript -l JavaScript $DOTFILES/tools/multiplex/tmux/config/themes/applescripts/tunes.js)"
# Tunes display: Main background, pink accent for separators and icon, then background for text.
tm_tunes_display="#[bg=${thm_bg}]#[fg=$thm_pink]#[bg=$thm_pink]#[fg=$thm_bg] #[fg=$thm_bg,bg=$thm_pink] ${tm_tunes} #[bg=${thm_bg}]#[fg=$thm_pink]"

# status elements
# Session display: Blue background, text foreground, with powerline separators.
session="#[fg=$thm_blue]#[bg=$thm_gray]#[bg=$thm_blue]#[fg=$thm_bg] #[fg=$thm_bg,bg=$thm_blue] #S #[bg=${thm_magenta}]#[fg=$thm_blue]"
# Clock display: Orange background, text foreground, with powerline separators.
clock="#[fg=$thm_orange]#[fg=$thm_bg,bg=$thm_orange] #[bg=$thm_orange]#[fg=$thm_bg] %H:%M#[bg=${thm_bg}]#[fg=$thm_orange]"
# Window display: Magenta background, text foreground, with powerline separators.
window="#[fg=$thm_fg,bg=$thm_magenta]#[bg=${thm_magenta}]#[fg=$thm_bg]#{?#{window_name},#{b:window_icon} #{window_name},#{b:pane_current_path}} #[bg=${thm_bg}]#[fg=$thm_magenta]"

# Disable default left/right status elements
set -g status-left ""
set -g status-right ""

# Centered format with left/right content (session on left, window on left, tunes in center, clock on right)
set -g status-format[0] \
"#[align=left]$session \
#[align=left]$window \
#[align=centre]$tm_tunes_display \
#[align=right]$clock"

# ----------- App Icon Mapping (set with window_icon) -----------
# Map common app names to Nerd Font icons. This part is unchanged as icons are universal.
set-hook -g after-new-window "run-shell 'tmux setenv -g TMUX_APP_ICON_#{window_index} \"#( \
  case #{window_name} in \
    zsh|bash) echo \"\" ;; \
    nvim) echo \"\" ;; \
    vim) echo \"\" ;; \
    git) echo \"\" ;; \
    htop) echo \"\" ;; \
    *) echo \"\" ;; \
  esac \
)\"'"

# Window status format: non-current window.
# Index with background (gray), then text with icon.
setw -g window-status-format "#[fg=$thm_bg,bg=$thm_gray] #I #[fg=$thm_fg,bg=$thm_gray] #{?#{window_name},#{b:TMUX_APP_ICON_#{window_index}} #{window_name},#{b:pane_current_path}} "
# Current window status format: active window.
# Bold index with accent background (green), then text with icon on main background.
setw -g window-status-current-format "#[fg=$thm_bg,bg=$thm_green,bold] #I #[fg=$thm_fg,bg=$thm_bg,bold] #{?#{window_name},#{b:TMUX_APP_ICON_#{window_index}} #{window_name},#{b:pane_current_path}} "

# Modes (e.g., copy mode)
setw -g clock-mode-colour "${thm_blue}"
setw -g mode-style "fg=${thm_pink} bg=$thm_dark bold"
