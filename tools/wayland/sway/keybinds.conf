### --- Definitions ---
# This pulls in your $mod, $terminal, $ss_dir, and environment setup
include definitions.conf

### --- Windows & Apps ---
# Fullscreen logic
bindsym $mod+F fullscreen
bindsym $mod+Shift+F fullscreen global

# App launching
bindsym $mod+Return exec $terminal
bindsym $mod+B exec $browser
bindsym $mod+I exec $browser --new-window https://gemini.google.com
bindsym $mod+G exec $browser --new-window https://www.github.com

# Window actions
bindsym $mod+Q kill
bindsym $mod+E exec $fileManager
bindsym $mod+T floating toggle
bindsym $mod+Space exec $menu
bindsym $mod+Shift+P exec ~/.config/scripts/powermenu.sh

# Focus follows mouse (Hyprland style)
focus_follows_mouse yes

# Clipboard management
bindsym $mod+Shift+D exec cliphist wipe && dunstify -u low "Clipboard" "History Cleared"
bindsym $mod+V exec cliphist list | wofi -d | cliphist decode | wl-copy

# --- Modern Lock (with Blur and Indicator) ---
# This uses swaylock-effects to blur the screen and show a ring indicator
bindsym $mod+Control+Q exec swaylock \
    --screenshots \
    --clock \
    --indicator \
    --indicator-radius 100 \
    --indicator-thickness 7 \
    --effect-blur 7x5 \
    --effect-vignette 0.5:0.5 \
    --ring-color bb00cc \
    --key-hl-color 880033 \
    --show-failed-attempts

### --- Specialized Scripts ---

# Wallpapers
bindsym $mod+Control+W exec ~/.config/scripts/random_wallpaper.sh --same
bindsym $mod+Alt+W exec ~/.config/scripts/random_wallpaper.sh

# --- Screenshot Configuration (Direct Path for Reliability) ---
# Area Screenshot: Save + Copy + Dunst
bindsym --release $mod+Alt+4 exec mkdir -p ~/Pictures/Screenshots && /bin/sh -c 'grim -g "$(slurp)" - | tee ~/Pictures/Screenshots/Area_$(date +%Y%m%d_%H%M%S).png | wl-copy && dunstify -u low -i camera-photo "Screenshot" "Area captured to Screenshots & Clipboard"'

# Fullscreen Screenshot: Save + Copy + Dunst
bindsym --release $mod+Control+4 exec mkdir -p ~/Pictures/Screenshots && /bin/sh -c 'OUT=$(swaymsg -t get_outputs | jq -r ".[] | select(.focused) | .name") && grim -o "$OUT" -t png - | tee ~/Pictures/Screenshots/Monitor_$(date +%Y%m%d_%H%M%S).png | wl-copy && dunstify -u low -i camera-photo "Screenshot" "Monitor $OUT captured"'

### --- Navigation & Workspaces ---
# Focus (HJKL)
bindsym $mod+L focus left
bindsym $mod+H focus right
bindsym $mod+J focus up
bindsym $mod+K focus down

# Move Window (Shift + HJKL)
bindsym $mod+Shift+H move left
bindsym $mod+Shift+L move right
bindsym $mod+Shift+J move up
bindsym $mod+Shift+K move down

# Switch to Workspaces 1-9
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9

# Move to Workspaces 1-9
bindsym $mod+Shift+1 move container to workspace number 1; workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2; workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3; workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4; workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5; workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6; workspace number 6
bindsym $mod+Shift+7 move container to workspace number 7; workspace number 7
bindsym $mod+Shift+8 move container to workspace number 8; workspace number 8
bindsym $mod+Shift+9 move container to workspace number 9; workspace number 9

### --- Resizing & Mouse ---
# Resizing
bindsym $mod+Shift+right resize grow width 100 px
bindsym $mod+Shift+left resize shrink width 100 px
bindsym $mod+Shift+down resize grow height 100 px
bindsym $mod+Shift+up resize shrink height 100 px

# Mouse dragging/resizing
floating_modifier $mod

### --- Hardware Keys ---
# Audio
bindsym XF86AudioRaiseVolume exec pactl set-sink-volume @DEFAULT_SINK@ +5%
bindsym XF86AudioLowerVolume exec pactl set-sink-volume @DEFAULT_SINK@ -5%
bindsym XF86AudioMute exec wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle

# Brightness
bindsym XF86MonBrightnessUp exec brightnessctl -e4 -n2 set 5%+
bindsym XF86MonBrightnessDown exec brightnessctl -e4 -n2 set 5%-
